<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog - Tom Andrieu</title>
  <meta name="description" content="Articles and thoughts on product engineering, building meaningful products, and technology." />

  <!-- PostHog Analytics (centralized) -->
  <script src="/js/analytics.js"></script>

  <!-- Base Styles (always loaded) -->
  <link rel="stylesheet" href="/css/base.css" />

  <!-- CRO Styles (conversion optimization) -->
  <link rel="stylesheet" href="/css/cro.css" />

  <!-- Theme Switcher UI Styles -->
  <link rel="stylesheet" href="/css/theme-switcher.css" />

  <!-- Language Switcher UI Styles -->
  <link rel="stylesheet" href="/css/language-switcher.css" />

  <!-- Blog Styles -->
  <link rel="stylesheet" href="/css/blog.css" />

  <!-- Theme CSS (dynamically loaded) -->
  <link id="theme-css" rel="stylesheet" href="" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&family=VT323&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Roboto+Mono:wght@300;400;500;700&display=swap" rel="stylesheet" />

  <!-- Critical CSS -->
  <style id="critical-css">
    body.loading #main-content,
    body.loading .theme-overlay,
    body.loading .theme-switcher {
      opacity: 0 !important;
      visibility: hidden !important;
    }

    #loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f8f7f4;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    #loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .loading-spinner {
      width: 36px;
      height: 36px;
      border: 2px solid rgba(61, 122, 115, 0.15);
      border-top-color: #3d7a73;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .loading-text {
      margin-top: 1.25rem;
      font-family: 'Inter', -apple-system, sans-serif;
      font-size: 0.8125rem;
      color: #8a8279;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    body:not(.loading) #main-content,
    body:not(.loading) .theme-overlay,
    body:not(.loading) .theme-switcher {
      opacity: 1;
      visibility: visible;
      transition: opacity 0.4s ease;
    }
  </style>
</head>
<body class="loading" data-theme="default">
<!-- Loading Screen -->
<div id="loading-screen">
  <div class="loading-spinner"></div>
  <div class="loading-text">Loading...</div>
</div>

<!-- Theme Overlay -->
<div id="theme-overlay" class="theme-overlay"></div>

<main id="main-content">
  <!-- Header -->
  <header class="header blog-header">
    <div class="header-brand">
      <a href="/" class="brand-link">
        <span class="brand-prefix"></span>
        <span class="brand-name" data-content="meta.name">TOM ANDRIEU</span>
        <span class="brand-suffix"></span>
      </a>
    </div>
    <div class="header-right">
      <nav class="nav">
        <a href="/#projects" class="nav-link" data-section="01">
          <span class="nav-prefix"></span>
          <span class="nav-text" data-i18n="nav.projects">Projects</span>
        </a>
        <a href="/#about" class="nav-link" data-section="02">
          <span class="nav-prefix"></span>
          <span class="nav-text" data-i18n="nav.about">About</span>
        </a>
        <a href="/blog/" class="nav-link active" data-section="04">
          <span class="nav-prefix"></span>
          <span class="nav-text" data-i18n="nav.blog">Blog</span>
        </a>
        <a href="/#contact" class="nav-link" data-section="05">
          <span class="nav-prefix"></span>
          <span class="nav-text" data-i18n="nav.contact">Contact</span>
        </a>
      </nav>
      <!-- Theme and language switchers will be inserted here by JS -->
    </div>
  </header>

  <!-- Blog Listing View -->
  <section id="blog-listing" class="blog-page">
    <div class="blog-page-header">
      <h1 class="blog-page-title" data-i18n="sections.blog">BLOG</h1>
      <p class="blog-page-subtitle" data-i18n="blog.subtitle">Thoughts on product engineering, building meaningful products, and technology.</p>
    </div>

    <div id="blog-list" class="blog-list">
      <div class="blog-list-loading">
        <span class="loading-text">Loading articles...</span>
        <span class="loading-spinner-text">...</span>
      </div>
    </div>

    <div id="pagination" class="pagination">
      <!-- Pagination controls inserted by JS -->
    </div>
  </section>

  <!-- Article Detail View (hidden by default) -->
  <article id="article-view" class="article-page" style="display: none;">
    <div class="article-header">
      <a href="/blog/" class="back-link">
        <span class="back-arrow">&larr;</span>
        <span>Back to Blog</span>
      </a>
      <div class="article-meta">
        <span id="article-date" class="article-date"></span>
        <span class="meta-separator">|</span>
        <span id="article-reading-time" class="article-reading-time"></span>
      </div>
      <h1 id="article-title" class="article-title"></h1>
    </div>

    <div id="article-cover" class="article-cover">
      <!-- Cover image inserted by JS -->
    </div>

    <div id="article-content" class="article-content">
      <!-- Article HTML inserted by JS -->
    </div>

    <div class="article-footer">
      <a href="/blog/" class="back-link">
        <span class="back-arrow">&larr;</span>
        <span>Back to Blog</span>
      </a>
    </div>
  </article>

  <!-- Footer -->
  <footer class="footer blog-footer">
    <div class="footer-content">
      <div class="footer-copyright">
        &copy; 2026 TOM ANDRIEU
      </div>
    </div>
  </footer>
</main>

<!-- GSAP for animations -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<!-- App Config (must load before other scripts) -->
<script src="/config.js"></script>

<!-- Core Modules -->
<script src="/js/core/utils.js"></script>
<script src="/js/core/content-loader.js"></script>
<script src="/js/core/card-renderer.js"></script>
<script src="/js/core/theme-init.js"></script>

<!-- i18n / Language Manager -->
<script src="/i18n/language-manager.js"></script>

<!-- Theme Manager (loads before language-switcher for correct order) -->
<script src="/js/theme-manager.js"></script>

<!-- Language Switcher UI -->
<script src="/i18n/language-switcher.js"></script>

<!-- Blog Scripts -->
<script>
// Cache-busting for development
(function() {
    const script = document.createElement('script');
    const cacheBuster = window.location.hostname === 'localhost' ? '?v=' + Date.now() : '';
    script.src = '/js/blog.js' + cacheBuster;
    document.body.appendChild(script);
})();
</script>

<!-- Theme JS (dynamically loaded) -->
<script id="theme-js" src=""></script>
</body>
</html>
